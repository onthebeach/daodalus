{"name":"Daodalus","tagline":"DSL for building MongoDB queries, updates and aggregations","body":"# DAODALUS  [![Build Status](https://travis-ci.org/onthebeach/daodalus.png)](http://travis-ci.org/onthebeach/daodalus) [![Code Climate](https://codeclimate.com/github/onthebeach/daodalus.png)](https://codeclimate.com/github/onthebeach/daodalus)\r\n\r\n### Construct complex MongoDB queries, updates and aggregations.\r\n\r\n### Configuration:\r\n\r\n    # config/mongo.yml\r\n    development:\r\n      animals:\r\n        database: animals_development\r\n        host: localhost\r\n        pool_size: 5\r\n        timeout: 5\r\n        replicate_set_name: animals_development\r\n        servers:\r\n          - { host: localhost, port: 27017 }\r\n\r\n### Initialisation:\r\n\r\n    # config/initializers/daodalus.rb\r\n    Daodalus::Configuration.load('config/mongo.yml', Rails.env)\r\n\r\n##### Examples:\r\n\r\n    #!ruby\r\n    class CatDAO\r\n      extend Daodalus::DAO # or `include` if you want an instance of a DAO\r\n      target :animals, :cats # or overide `connection` to supply your own\r\n\r\n      def self.example_find\r\n        select(:name).where(:paws).less_than(4).find\r\n      end\r\n\r\n      def self.example_find_one\r\n        where(:collar_id).eq(\"aochc986\").find_one\r\n      end\r\n\r\n      def self.example_update\r\n        set(:stray, true).where(:address).does_not_exist.update\r\n      end\r\n\r\n      def self.example_find_and_modify\r\n        dec(:lives).\r\n          push(:names, \"Kitty\").\r\n          where(:stray).eq(true).\r\n          and(:cuteness).gt(8).\r\n          find_and_modify(new: true)\r\n      end\r\n\r\n      def self.example_remove\r\n        where(:lives).eq(0).remove\r\n      end\r\n\r\n      def self.example_aggregation\r\n        match(:lives).gt(3).\r\n          and(:address).exists.\r\n          unwind(:favourite_foods).\r\n          group(:favourite_foods).\r\n          min(min_paws: 'paws').\r\n          sort(:_id).\r\n          limit(10).\r\n          project(:_id).as(:food).and(:min_paws).\r\n          aggregate\r\n      end\r\n    end\r\n\r\n## License\r\n\r\nDaodalus is Copyright Â© 2012 On The Beach Ltd.\r\nIt is free software, and may be redistributed under the terms specified in the LICENSE file.\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}